<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; object-src 'none'; base-uri 'self'; frame-ancestors 'none'; form-action 'self';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <title>Giriş - SOC Konsolu</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="login-page">
    <!-- Simulation Notice -->
    <div class="simulation-badge">
        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
        </svg>
        Simülasyon Modu — Eğitim Amaçlı
    </div>

    <div class="login-container">
        <div class="login-card">
            <!-- Logo -->
            <div class="login-header">
                <svg class="login-logo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
                <h1>SOC Konsolu</h1>
                <p class="login-subtitle" id="subtitle">Güvenlik Operasyon Merkezi</p>
            </div>

            <!-- Setup Form (First Run) -->
            <form id="setup-form" class="login-form" style="display: none;">
                <div class="form-header">
                    <h2>İlk Kurulum</h2>
                    <p>Yönetici parolası belirleyin. Bu parola tarayıcınıza özgüdür.</p>
                </div>

                <div class="form-group">
                    <label for="setup-password">Yönetici Parolası</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="setup-password" autocomplete="new-password" 
                               placeholder="Güçlü bir parola girin" required>
                        <button type="button" class="toggle-password" data-target="setup-password" aria-label="Parolayı göster">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </button>
                    </div>
                    <div class="password-strength" id="setup-strength">
                        <div class="strength-bar"><div class="strength-fill" id="setup-strength-fill"></div></div>
                        <span class="strength-label" id="setup-strength-label">—</span>
                    </div>
                    <div class="caps-lock-warning" id="setup-caps" style="display: none;">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                        </svg>
                        Caps Lock açık
                    </div>
                </div>

                <div class="form-group">
                    <label for="setup-confirm">Parolayı Onayla</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="setup-confirm" autocomplete="new-password" 
                               placeholder="Parolayı tekrar girin" required>
                        <button type="button" class="toggle-password" data-target="setup-confirm" aria-label="Parolayı göster">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="form-info">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                    <span>Cihaza Bağlı — Parola sadece bu tarayıcıda geçerlidir</span>
                </div>

                <button type="submit" class="btn btn-primary btn-lg">
                    <span>Kurulumu Tamamla</span>
                </button>
            </form>

            <!-- Login Form -->
            <form id="login-form" class="login-form" style="display: none;">
                <div class="form-group">
                    <label for="username">Kullanıcı Adı</label>
                    <input type="text" id="username" autocomplete="username" 
                           placeholder="Kullanıcı adınızı girin" required>
                </div>

                <div class="form-group">
                    <label for="password">Parola</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="password" autocomplete="current-password" 
                               placeholder="Parolanızı girin" required>
                        <button type="button" class="toggle-password" data-target="password" aria-label="Parolayı göster">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </button>
                    </div>
                    <div class="caps-lock-warning" id="login-caps" style="display: none;">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                        </svg>
                        Caps Lock açık
                    </div>
                </div>

                <div class="form-error" id="login-error" style="display: none;"></div>
                <div class="form-lockout" id="login-lockout" style="display: none;">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
                    </svg>
                    <span id="lockout-timer">—</span>
                </div>

                <button type="submit" class="btn btn-primary btn-lg" id="login-btn">
                    <span>Giriş Yap</span>
                </button>
            </form>

            <!-- Error Display -->
            <div class="login-error" id="global-error" style="display: none;">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
                </svg>
                <span id="error-message"></span>
            </div>
        </div>

        <!-- Footer -->
        <div class="login-footer">
            <p>Anadolu Finans Holding — Güvenlik Operasyon Merkezi</p>
            <p class="muted">Bu bir simülasyon/eğitim projesidir. Gerçek şirketlerle ilişkisi yoktur.</p>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="security.js"></script>
    <script src="login-controller.js"></script>
</body>
</html>
